<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neoma Media</title>
    <link rel="stylesheet" href="./assets/style.css">
</head>

<body>
    <section class="herosection">
        <div class="hero">
            <div class="earth-area area1"></div>
            <div class="earth-area area2"></div>
            <div class="earth">
                <div class="earth-rotate">
                    <div class="earth-counter-rotate">
                        <div class="earth-image"></div>
                    </div>
                </div>
            </div>
            <h3>Weâ€™ll Chart Your</h3>
            <h3 class="stroked">Constellations</h3>
            <h3>of Success</h3>
        </div>
        <div>
            <div id='w'>
                <canvas id="space"></canvas>
                <div id="warp"></div>
            </div>
        </div>
    </section>
    <section class="secw">

    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Flip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.ripples/0.5.3/jquery.ripples.js"></script>
    <script src="./assets/script.js"></script>
    <script>
        //based on an Example by @curran

        window.requestAnimFrame = (function () {
            return window.requestAnimationFrame
        })();

        var canvas = document.getElementById("space");

        var c = canvas.getContext("2d");



        var numStars = 1900;

        var radius = '0.' + Math.floor(Math.random() * 9) + 1;

        var focalLength = canvas.width * 2;

        var warp = 0;

        var centerX, centerY;



        var stars = [],
            star;

        var i;



        var animate = true;



        initializeStars();



        function executeFrame() {



            if (animate)

                requestAnimFrame(executeFrame);

            moveStars();

            drawStars();

        }



        function initializeStars() {

            centerX = canvas.width / 2;

            centerY = canvas.height / 2;



            stars = [];

            for (i = 0; i < numStars; i++) {

                star = {

                    x: Math.random() * canvas.width,

                    y: Math.random() * canvas.height,

                    z: Math.random() * canvas.width,

                    o: '0.' + Math.floor(Math.random() * 99) + 1

                };

                stars.push(star);

            }

        }



        function moveStars() {

            for (i = 0; i < numStars; i++) {

                star = stars[i];

                star.z--;



                if (star.z <= 0) {

                    star.z = canvas.width;

                }

            }

        }



        function drawStars() {

            var pixelX, pixelY, pixelRadius;



            // Resize to the screen

            if (canvas.width != window.innerWidth || canvas.width != window.innerWidth) {

                canvas.width = window.innerWidth;

                canvas.height = window.innerHeight;

                initializeStars();

            }

            if (warp == 0) {
                c.fillStyle = "rgba(0,10,20,1)";

                c.fillRect(0, 0, canvas.width, canvas.height);
            }

            c.fillStyle = "rgba(209, 255, 255, " + radius + ")";

            for (i = 0; i < numStars; i++) {

                star = stars[i];



                pixelX = (star.x - centerX) * (focalLength / star.z);

                pixelX += centerX;

                pixelY = (star.y - centerY) * (focalLength / star.z);

                pixelY += centerY;

                pixelRadius = 1 * (focalLength / star.z);



                c.fillRect(pixelX, pixelY, pixelRadius, pixelRadius);

                c.fillStyle = "rgba(209, 255, 255, " + star.o + ")";

                //c.fill();

            }

        }



        document.getElementById('warp').addEventListener("click", function (e) {

            window.warp = window.warp == 1 ? 0 : 1;

            window.c.clearRect(0, 0, window.canvas.width, window.canvas.height);

            executeFrame();

        });



        executeFrame();
    </script>

</html>